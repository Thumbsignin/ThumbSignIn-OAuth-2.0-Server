<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Demo</title>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width"/>
	<link rel="stylesheet" type="text/css" href="/webjars/bootstrap/css/bootstrap.min.css"/>
	<script src='https://stage.thumbsignin.com/thumbsign_widget.js'></script>
</head>
<body>
<h3>ThumbSignIn OAuth 2.0 Identity Provider (IdP)</h3>
<i>Welcome! You have logged in using your credentials!</i><br><br>

	<button class="ts-auth-button" id="RegisterBtn" 
		style="border: 1px solid rgb(72, 210, 160); background-color: rgb(72, 210, 160);">Click here to register with ThumbSignin
	</button>
    <script>
        (function(){document.write("<style>#tsBtn{color:#fff;border-radius:2px;background-color:#cccccc;width:230px;height:40px;margin-top: 20px;margin-left: 35;outline:0;border:1px solid #cccccc;cursor:pointer;font-size:16px;padding-left:30px;text-transform:none;background-position: 5px;background-image:url('https://thumbsignin.com/styles/img/logoIcon.png');background-repeat:no-repeat}</style>");})();
    </script>
    <div id="registerWidgetContainer"></div>
	
	<script type="text/javascript">	
	
	(function() {
	      thumbSignIn.addConfig('REGISTER_CONFIG', {
	              actionUrl: "/ts/secure/register/"+getQueryParam("uname"),  
	              statusUrl: "/ts/secure/regStatus/"
	      });
		  thumbSignIn.init({
	              id:'tsRegister',
	              config: 'REGISTER_CONFIG',
	              container: 'registerWidgetContainer'
	      }).then(function(){
	        //Add on click events
	        $('#RegisterBtn').click(function(){
	        	tsRegister.open()
	        });
	        $('#close').click(function(){
	        	tsRegister.close()
	        });
		    // Post initialisation of the 'tsRegister' widget, u will be able to add event listeners
	        tsRegister.registerEvent('SUCCESS', function (response) {
	          window.location.hash = '';
	          window.location.pathname = response.redirectUrl;
	        });
	   })
	  })();
	
	function getQueryParam(search_for) {
		var query = window.location.search.substring(1);
		var parms = query.split('&');
		for (var i=0; i<parms.length; i++) {
			var pos = parms[i].indexOf('=');
			if (pos > 0  && search_for == parms[i].substring(0,pos)) {
				return parms[i].substring(pos+1);;
			}
		}
		return "";
	}
    	    	
	</script>

</body>
</html>